<!DOCTYPE html>
<html lang="en-AU">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Passphrase Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Chosen Palette: Calm Neutrals */
        body {
            font-family: 'Inter', sans-serif;
        }
        .list-box {
            height: 200px;
            overflow-y: auto;
        }
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
    </style>
    <!-- 
        Application Structure Plan: The SPA is redesigned to be a functional "Passphrase Generator" first. 
        1. Header: Provides title and context.
        2. "Generate Your Passphrase": This is the primary interactive tool, formerly the "demo" section. It's moved to the top for immediate use.
        3. "Get the Bookmarklet": A new section providing the minified code as a draggable <a> link, which was a key user request.
        4. "How it Works": Explains the generator's logic.
        5. "Source Data": Shows the data lists used by the generator.
        6. "Source Code": Shows the readable code.
        This structure prioritises the page's new function (generating) while still providing the bookmarklet and all the explanatory context from the analyser.
    -->
    <!-- 
        Visualization & Content Choices: 
        - Report Info: Minified JS code from the bookmarklet.
        - Goal: Create a webpage that IS the generator, and also PROVIDES the bookmarklet.
        - Viz/Presentation: 
            - Generator Tool: HTML Button + JS function + Text Display. Goal: Interact/Inform.
            - Bookmarklet Link: A styled <a> element with the minified JS in its href attribute. Goal: Interact/Provide.
            - Logic (Formula): Textual/HTML representation. Goal: Inform.
            - Word Lists: HTML scrollable <div> elements. Goal: Inform/Organize.
            - Un-minified Code: HTML `<pre><code>` block. Goal: Inform.
        - Interaction: 1. "Generate" button on page. 2. Draggable <a> link.
        - Justification: This structure directly serves the user's dual goals: use the generator now, and take the generator with them (as a bookmarklet).
        - Library/Method: Vanilla JS.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="bg-slate-100 text-slate-900 p-4 md:p-8 min-h-screen">

    <div class="max-w-6xl mx-auto bg-white rounded-xl shadow-lg p-6 md:p-10">

        <!-- Header -->
        <header class="border-b border-slate-200 pb-4 mb-6">
            <h1 class="text-3xl md:text-4xl font-bold text-slate-800">Passphrase Generator</h1>
            <p class="text-lg text-slate-600 mt-1">Create a secure, random passphrase from a bookmarklet.</p>
        </header>

        <!-- Main Content -->
        <main>

            <!-- Interactive Generator -->
            <section id="generator" class="mb-8">
                <h2 class="text-2xl font-semibold text-slate-700 mb-3">Generate Your Passphrase</h2>
                <p class="text-slate-600 mb-4">
                    Click the button below to generate a new passphrase. The result will appear in the box,
                    ready for you to copy.
                </p>
                <div class="flex flex-col sm:flex-row gap-4">
                    <button id="generate-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50">
                        Generate Passphrase
                    </button>
                    <div class="relative flex-1">
                        <input id="passphrase-output" type="text" readonly
                            class="w-full bg-slate-100 border border-slate-300 text-slate-700 text-lg p-3 rounded-lg focus:outline-none"
                            placeholder="Your passphrase will appear here...">
                        <button id="copy-btn" class="absolute right-2 top-1/2 -translate-y-1/2 bg-slate-200 hover:bg-slate-300 text-slate-600 p-2 rounded-md">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                <!-- Removed the old <p id="copy-feedback"> element -->
            </section>

            <!-- Get the Bookmarklet -->
            <section id="bookmarklet" class="mb-8">
                <h2 class="text-2xl font-semibold text-slate-700 mb-3">Get the Bookmarklet</h2>
                <p class="text-slate-600 mb-4">
                    Drag the link below to your browser's bookmarks bar. Clicking it on any webpage
                    will generate a new passphrase and copy it to your clipboard.
                </p>
                <div class="bg-slate-50 border border-slate-200 rounded-lg p-4 flex items-center justify-center">
                    <!-- UPDATED: The href attribute now contains the new bookmarklet logic with the passphrase in the toast -->
                    <a id="bookmarklet-link"
                       href="javascript:(function(){const d=['Alert','Always','Badly','Brave','Bright','Brightly','Calm','Calmly','Clear','Clearly','Close','Closely','Cold','Common','Cool','Daily','Deeply','Direct','Early','Easily','Empty','Even','Evenly','Exact','Exactly','Extra','Fair','Fairly','Final','Finally','Fine','Finely','First','Fit','Fixed','Freely','Fresh','Freshly','Full','Fully','Gently','Glad','Gladly','Gold','Golden','Grand','Great','Greatly','Green','Happy','Happily','Heavy','Highly','Honestly','Hourly','Human','Ideal','Inner','Joint','Keen','Kind','Kindly','Large','Largely','Last','Late','Lately','Legal','Level','Light','Lightly','Local','Loud','Loudly','Low','Lower','Lucky','Magic','Main','Mainly','Major','Merely','Monthly','Moral','Motor','Neat','Neatly','Nearly','Newer','Newly','Next','Noble','Normal','Official','Often','Only','Open','Openly','Other','Outer','Past','Personal','Plain','Plainly','Prime','Proud','Proudly','Public','Quick','Quickly','Quiet','Quietly','Radio','Rapid','Rarely','Real','Really','Rich','Right','Rising','Roman','Royal','Rural','Sadly','Safe','Safely','Same','Sharp','Shiny','Short','Simple','Simply','Single','Slow','Slowly','Small','Smart','Smooth','Soft','Solid','Special','Square','Still','Stone','Strong','Sure','Sweet','Tall','Tidy','Total','True','Upper'];const v=['Acted','Acting','Added','Adding','Answered','Answering','Applied','Arrived','Arriving','Asked','Asking','Avoided','Avoiding','Become','Becoming','Begun','Beginning','Believed','Believing','Bought','Brought','Buying','Building','Built','Called','Calling','Cared','Caring','Catching','Caught','Changed','Changing','Checked','Checking','Choosing','Chosen','Cleaned','Cleaning','Cleared','Clearing','Climbed','Climbing','Closed','Closing','Counted','Counting','Covered','Covering','Crossed','Crossing','Danced','Dancing','Dated','Dating','Dealing','Dealt','Decided','Deciding','Drawn','Dreamed','Dreaming','Driven','Driving','Ended','Ending','Entered','Entering','Faced','Facing','Fallen','Falling','Filled','Filling','Finding','Found','Flown','Flying','Followed','Following','Gained','Gaining','Given','Giving','Going','Gone','Grown','Growing','Guided','Guiding','Handled','Handling','Heard','Hearing','Held','Helping','Hidden','Hiding','Holding','Hoped','Hoping','Imagined','Imaging','Invited','Inviting','Joked','Joined','Joining','Judged','Judging','Jumped','Jumping','Kept','Keeping','Knowing','Known','Laughed','Laughing','Learned','Learning','Leaving','Left','Lifted','Lifting','Lived','Living','Looked','Looking','Losing','Lost','Made','Making','Marked','Marking','Matched','Matching','Meeting','Met','Moved','Moving','Opened','Opening','Ordered','Ordering','Paid','Painted','Painting','Parked','Parking','Paying','Picked','Picking','Planned','Planning','Played','Playing','Pressed','Pressing','Pulled','Pulling','Pushed','Pushing','Raised','Raising','Reached','Reaching','Read','Reading','Run','Running','Seen','Seeing','Set','Setting','Started','Starting','Taken','Taking','Talked','Talking'];const n=['Area','Art','Back','Bunk','Bed','Bill','Book','Business','Car','Case','Cash','Cat','Centre','Change','City','Class','Club','Cost','Day','Door','End','Fact','Family','Farm','Father','Field','File','Film','Food','Foot','Force','Form','Fund','Game','Hand','Health','Heart','Home','Hour','House','Idea','Issue','Job','Judge','Kind','King','Lake','Land','Law','Level','Life','Light','Line','Link','List','Mail','Map','Mark','Market','Matter','Media','Mind','Minute','Model','Money','Month','Morning','Mother','Music','Name','Need','Network','News','Night','Note','Number','Office','Order','Owner','Page','Paint','Paper','Parent','Park','Part','Past','Path','Peace','People','Person','Phone','Photo','Place','Plan','Plane','Plant','Play','Point','Post','Price'];const p=['!','#','$','%','&','*','+','-','.'];function r(a){return a[Math.floor(Math.random()*a.length)]}function c(w){return Math.random()>0.5?w.charAt(0).toLowerCase()+w.slice(1):w}const a=c(r(d));const p1=r(p);const b=c(r(v));const p2=r(p);const nWord=r(n);const o=a[0]===a[0].toLowerCase()&&b[0]===b[0].toLowerCase()?nWord:c(nWord);const m=Math.floor(Math.random()*90)+10;const g=a+p1+b+p2+o+m;try{const t=document.createElement('textarea');t.value=g;t.style.position='fixed';t.style.top='-9999px';t.style.left='-9999px';document.body.appendChild(t);t.focus();t.select();document.execCommand('copy');document.body.removeChild(t);try{const s=document.createElement('div'),t1=document.createTextNode(g),br=document.createElement('br'),t2=document.createElement('span');t2.textContent='copied to clipboard!',t2.style.fontSize='0.875rem',t2.style.fontWeight='400',s.appendChild(t1),s.appendChild(br),s.appendChild(t2),s.style.cssText='position:fixed;top:20px;left:50%;transform:translateX(-50%) translateY(-50px);background-color:#22c55e;color:white;padding:12px 24px;border-radius:8px;font-family:sans-serif;font-weight:600;z-index:9999;opacity:0;transition:all 0.3s ease-in-out;text-align:center;',document.body.appendChild(s),setTimeout(()=>{s.style.opacity='1',s.style.transform='translateX(-50%) translateY(0)'},10),setTimeout(()=>{s.style.opacity='0',s.style.transform='translateX(-50%) translateY(-50px)'},5000),setTimeout(()=>{document.body.removeChild(s)},5300)}catch(e){}}catch(e){prompt('Copy this passphrase:',g)}})();"
                       class="inline-block bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition-all duration-200 cursor-move focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50">
                        Drag to Bookmarks â†’
                    </a>
                </div>
            </section>

            <!-- How it Works -->
            <section id="how-it-works" class="mb-8">
                <h2 class="text-2xl font-semibold text-slate-700 mb-3">How It Works</h2>
                <p class="text-slate-600 mb-4">
                    This generator creates a passphrase by combining five randomised components
                    plus a random number. It also randomly capitalises the first letter of each word
                    to increase entropy.
                </p>
                <h3 class="text-lg font-semibold text-slate-700 mb-2">Passphrase Format:</h3>
                <div class="flex flex-wrap gap-2 items-center bg-slate-50 p-4 rounded-lg">
                    <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-md font-medium">Descriptor</span>
                    <span class="text-slate-500 font-bold">+</span>
                    <span class="bg-purple-100 text-purple-800 px-3 py-1 rounded-md font-medium">Punc 1</span>
                    <span class="text-slate-500 font-bold">+</span>
                    <span class="bg-green-100 text-green-800 px-3 py-1 rounded-md font-medium">Verb</span>
                    <span class="text-slate-500 font-bold">+</span>
                    <span class="bg-purple-100 text-purple-800 px-3 py-1 rounded-md font-medium">Punc 2</span>
                    <span class="text-slate-500 font-bold">+</span>
                    <span class="bg-yellow-100 text-yellow-800 px-3 py-1 rounded-md font-medium">Noun</span>
                    <span class="text-slate-500 font-bold">+</span>
                    <span class="bg-red-100 text-red-800 px-3 py-1 rounded-md font-medium">Number</span>
                </div>
            </section>

            <!-- Source Data -->
            <section id="data" class="mb-8">
                <h2 class="text-2xl font-semibold text-slate-700 mb-3">Source Data Lists</h2>
                <p class="text-slate-600 mb-4">
                    The generator randomly selects one word from each of these lists. The noun list
                    contains 100 SFW words, the descriptor list contains 147, and the verb list now contains 173.
                </p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <h3 class="font-semibold text-slate-700 mb-2">Descriptors</h3>
                        <div id="descriptors-list" class="list-box bg-slate-50 border border-slate-200 rounded-lg p-3 text-sm text-slate-600"></div>
                    </div>
                    <div>
                        <h3 class="font-semibold text-slate-700 mb-2">Verbs (Participles)</h3>
                        <div id="verbs-list" class="list-box bg-slate-50 border border-slate-200 rounded-lg p-3 text-sm text-slate-600"></div>
                    </div>
                    <div>
                        <h3 class="font-semibold text-slate-700 mb-2">Nouns</h3>
                        <div id="nouns-list" class="list-box bg-slate-50 border border-slate-200 rounded-lg p-3 text-sm text-slate-600"></div>
                    </div>
                </div>
                <div class="mt-4">
                    <h3 class="font-semibold text-slate-700 mb-2">Punctuation</h3>
                    <div id="punctuation-list" class="bg-slate-50 border border-slate-200 rounded-lg p-3 font-mono text-lg text-slate-600 text-center tracking-widest">
                    </div>
                </div>
            </section>

            <!-- Source Code -->
            <section id="code">
                <h2 class="text-2xl font-semibold text-slate-700 mb-3">Readable Source Code</h2>
                <p class="text-slate-600 mb-4">
                    This is the un-minified JavaScript logic that powers the generator and the bookmarklet.
                </p>
                <!-- UPDATED: The readable code now includes the logic for the self-creating toast notification -->
                <div class="bg-slate-900 text-slate-100 rounded-lg p-4 overflow-x-auto">
<pre><code class="language-javascript">(function() {
    // --- Data Lists ---
    const descriptors = [
        'Alert', 'Always', 'Badly', 'Brave', 'Bright', 'Brightly', 'Calm', 'Calmly', 'Clear', 'Clearly',
        'Close', 'Closely', 'Cold', 'Common', 'Cool', 'Daily', 'Deeply', 'Direct', 'Early', 'Easily',
        'Empty', 'Even', 'Evenly', 'Exact', 'Exactly', 'Extra', 'Fair', 'Fairly', 'Final', 'Finally',
        'Fine', 'Finely', 'First', 'Fit', 'Fixed', 'Freely', 'Fresh', 'Freshly', 'Full', 'Fully',
        'Gently', 'Glad', 'Gladly', 'Gold', 'Golden', 'Grand', 'Great', 'Greatly', 'Green', 'Happy',
        'Happily', 'Heavy', 'Highly', 'Honestly', 'Hourly', 'Human', 'Ideal', 'Inner', 'Joint', 'Keen',
        'Kind', 'Kindly', 'Large', 'Largely', 'Last', 'Late', 'Lately', 'Legal', 'Level', 'Light',
        'Lightly', 'Local', 'Loud', 'Loudly', 'Low', 'Lower', 'Lucky', 'Magic', 'Main', 'Mainly',
        'Major', 'Merely', 'Monthly', 'Moral', 'Motor', 'Neat', 'Neatly', 'Nearly', 'Newer', 'Newly',
        'Next', 'Noble', 'Normal', 'Official', 'Often', 'Only', 'Open', 'Openly', 'Other', 'Outer',
        'Past', 'Personal', 'Plain', 'Plainly', 'Prime', 'Proud', 'Proudly', 'Public', 'Quick', 'Quickly',
        'Quiet', 'Quietly', 'Radio', 'Rapid', 'Rarely', 'Real', 'Really', 'Rich', 'Right', 'Rising',
        'Roman', 'Royal', 'Rural', 'Sadly', 'Safe', 'Safely', 'Same', 'Sharp', 'Shiny', 'Short',
        'Simple', 'Simply', 'Single', 'Slow', 'Slowly', 'Small', 'Smart', 'Smooth', 'Soft', 'Solid',
        'Special', 'Square', 'Still', 'Stone', 'Strong', 'Sure', 'Sweet', 'Tall', 'Tidy', 'Total',
        'True', 'Upper'
    ];

    const verbs = [
        'Acted', 'Acting', 'Added', 'Adding', 'Answered', 'Answering', 'Applied', 'Arrived', 'Arriving', 'Asked', 
        'Asking', 'Avoided', 'Avoiding', 'Become', 'Becoming', 'Begun', 'Beginning', 'Believed', 'Believing', 'Bought', 
        'Brought', 'Buying', 'Building', 'Built', 'Called', 'Calling', 'Cared', 'Caring', 'Catching', 'Caught', 
        'Changed', 'Changing', 'Checked', 'Checking', 'Choosing', 'Chosen', 'Cleaned', 'Cleaning', 'Cleared', 'Clearing', 
        'Climbed', 'Climbing', 'Closed', 'Closing', 'Counted', 'Counting', 'Covered', 'Covering', 'Crossed', 'Crossing', 
        'Danced', 'Dancing', 'Dated', 'Dating', 'Dealing', 'Dealt', 'Decided', 'Deciding', 'Drawn', 'Dreamed', 
        'Dreaming', 'Driven', 'Driving', 'Ended', 'Ending', 'Entered', 'Entering', 'Faced', 'Facing', 'Fallen', 
        'Falling', 'Filled', 'Filling', 'Finding', 'Found', 'Flown', 'Flying', 'Followed', 'Following', 'Gained', 
        'Gaining', 'Given', 'Giving', 'Going', 'Gone', 'Grown', 'Growing', 'Guided', 'Guiding', 'Handled', 
        'Handling', 'Heard', 'Hearing', 'Held', 'Helping', 'Hidden', 'Hiding', 'Holding', 'Hoped', 'Hoping', 
        'Imagined', 'Imaging', 'Invited', 'Inviting', 'Joked', 'Joined', 'Joining', 'Judged', 'Judging', 'Jumped', 
        'Jumping', 'Kept', 'Keeping', 'Knowing', 'Known', 'Laughed', 'Laughing', 'Learned', 'Learning', 'Leaving', 
        'Left', 'Lifted', 'Lifting', 'Lived', 'Living', 'Looked', 'Looking', 'Losing', 'Lost', 'Made', 
        'Making', 'Marked', 'Marking', 'Matched', 'Matching', 'Meeting', 'Met', 'Moved', 'Moving', 'Opened', 
        'Opening', 'Ordered', 'Ordering', 'Paid', 'Painted', 'Painting', 'Parked', 'Parking', 'Paying', 'Picked', 
        'Picking', 'Planned', 'Planning', 'Played', 'Playing', 'Pressed', 'Pressing', 'Pulled', 'Pulling', 'Pushed', 
        'Pushing', 'Raised', 'Raising', 'Reached', 'Reaching', 'Read', 'Reading', 'Run', 'Running', 'Seen', 
        'Seeing', 'Set', 'Setting', 'Started', 'Starting', 'Taken', 'Taking', 'Talked', 'Talking'
    ];

    const nouns = [
        'Area', 'Art', 'Back', 'Bank', 'Bed', 'Bill', 'Book', 'Business', 'Car', 'Case', 
        'Cash', 'Cat', 'Centre', 'Change', 'City', 'Class', 'Club', 'Cost', 'Day', 'Door', 
        'End', 'Fact', 'Family', 'Farm', 'Father', 'Field', 'File', 'Film', 'Food', 'Foot', 
        'Force', 'Form', 'Fund', 'Game', 'Hand', 'Health', 'Heart', 'Home', 'Hour', 'House', 
        'Idea', 'Issue', 'Job', 'Judge', 'Kind', 'King', 'Lake', 'Land', 'Law', 'Level', 
        'Life', 'Light', 'Line', 'Link', 'List', 'Mail', 'Map', 'Mark', 'Market', 'Matter', 
        'Media', 'Mind', 'Minute', 'Model', 'Money', 'Month', 'Morning', 'Mother', 'Music', 'Name', 
        'Need', 'Network', 'News', 'Night', 'Note', 'Number', 'Office', 'Order', 'Owner', 'Page', 
        'Paint', 'Paper', 'Parent', 'Park', 'Part', 'Past', 'Path', 'Peace', 'People', 'Person', 
        'Phone', 'Photo', 'Place', 'Plan', 'Plane', 'Plant', 'Play', 'Point', 'Post', 'Price'
    ];

    const punctuation = ['!', '#', '$', '%', '&', '*', '+', '-', '.'];

    // --- Helper Functions ---
    function getRandomItem(arr) {
        return arr[Math.floor(Math.random() * arr.length)];
    }

    /**
     * Randomly lowercases the first letter of a word.
     * (Assumes source words are already capitalised)
     * @param {string} word The word to process.
     * @returns {string} The word with its first letter randomly cased.
     */
    function randomCapitalize(word) {
        // 50% chance of being lowercase
        if (Math.random() > 0.5) {
            return word.charAt(0).toLowerCase() + word.slice(1);
        }
        return word; // Keep original (uppercase)
    }

    // --- Core Logic ---
    function generatePassphrase() {
        const adj = randomCapitalize(getRandomItem(descriptors));
        const p1 = getRandomItem(punctuation);
        const verb = randomCapitalize(getRandomItem(verbs));
        const p2 = getRandomItem(punctuation);
        
        const nounWord = getRandomItem(nouns);
        let noun;

        // Check if the first two words were BOTH lowercased
        if (adj[0] === adj[0].toLowerCase() && verb[0] === verb[0].toLowerCase()) {
            // If so, force the third word to be capitalised.
            // Since the source word is already capitalised, we just use it directly.
            noun = nounWord;
        } else {
            // Otherwise, at least one is capitalised, so we can
            // safely randomise the third word.
            noun = randomCapitalize(nounWord);
        }
        
        const num = Math.floor(Math.random() * 90) + 10; // 10-99

        // Format: {descriptor}{p1}{verb}{p2}{noun}{number}
        const passphrase = adj + p1 + verb + p2 + noun + num;

        // --- Clipboard and Toast Logic ---
        // This function is self-contained for the bookmarklet.
        try {
            // 1. Copy to clipboard
            const t = document.createElement('textarea');
            t.value = passphrase;
            t.style.position = 'fixed';
            t.style.top = '-9999px';
            t.style.left = '-9999px';
            document.body.appendChild(t);
            t.focus();
            t.select();
            document.execCommand('copy');
            document.body.removeChild(t);

            // 2. Show toast notification
            try {
                const s = document.createElement('div');
                // UPDATED: Set innerHTML to include passphrase and line break
                // s.innerHTML = `${passphrase} <br/> <span style="font-size: 0.875rem; font-weight: 400;">copied to clipboard!</span>`;
                
                // NEW: Build toast with DOM elements to avoid HTML parsing issues in bookmarklet
                const t1 = document.createTextNode(passphrase);
                const br = document.createElement('br');
                const t2 = document.createElement('span');
                t2.textContent = 'copied to clipboard!';
                t2.style.fontSize = '0.875rem';
                t2.style.fontWeight = '400';
                s.appendChild(t1);
                s.appendChild(br);
                s.appendChild(t2);

                // Apply inline styles for the toast, as it runs on any site
                s.style.cssText = `
                    position: fixed;
                    top: 20px; /* CHANGED */
                    left: 50%;
                    transform: translateX(-50%) translateY(-50px); /* CHANGED (hidden state) */
                    background-color: #22c55e; /* Tailwind green-500 */
                    color: white;
                    padding: 12px 24px;
                    border-radius: 8px;
                    font-family: sans-serif;
                    font-weight: 600;
                    z-index: 9999;
                    opacity: 0;
                    transition: all 0.3s ease-in-out;
                    text-align: center;
                `;
                document.body.appendChild(s);

                // Short delay to allow CSS to apply before transitioning
                setTimeout(() => {
                    s.style.opacity = '1';
                    s.style.transform = 'translateX(-50%) translateY(0)';
                }, 10);

                // Start fade-out after 5 seconds
                setTimeout(() => {
                    s.style.opacity = '0';
                    s.style.transform = 'translateX(-50%) translateY(-50px)'; /* CHANGED */
                }, 5000); /* CHANGED */

                // Remove from DOM after transition finishes
                setTimeout(() => {
                    document.body.removeChild(s);
                }, 5300); /* CHANGED */
            } catch (e) {
                // Fail silently if toast creation fails
            }

        } catch (e) {
            // Fallback for copy failure
            prompt('Copy this passphrase:', passphrase);
        }

        return passphrase; // Return for the on-page generator
    }

    // --- DOM Interaction (for this page) ---
    
    // This logic is separate from the bookmarklet's self-contained function.
    // It controls the interactive elements on *this* page.
    
    const btn = document.getElementById('generate-btn');
    const output = document.getElementById('passphrase-output');
    const copyBtn = document.getElementById('copy-btn');
    const toast = document.getElementById('copy-toast');
    let toastTimeout; // To manage the toast's fade-out

    /**
     * Shows the on-page toast notification.
     * @param {string} message The message to display (can be HTML).
     */
    function showToast(message) {
        if (!toast) return;

        // Clear any existing timeout to prevent premature hiding
        if (toastTimeout) {
            clearTimeout(toastTimeout);
        }

        // UPDATED: Use innerHTML to render the message
        toast.innerHTML = message;
        
        // Apply "show" classes
        toast.classList.remove('opacity-0', 'invisible', '-translate-y-12');
        toast.classList.add('opacity-100', 'visible', 'translate-y-0');

        // Set a timeout to hide the toast
        toastTimeout = setTimeout(() => {
            toast.classList.remove('opacity-100', 'visible', 'translate-y-0');
            toast.classList.add('opacity-0', 'invisible', '-translate-y-12');
        }, 5000); // Hide after 5 seconds
    }

    if (btn && output && copyBtn && toast) {
        btn.addEventListener('click', () => {
            // The generatePassphrase() function for the bookmarklet
            // *also* copies and shows a toast. We only want the
            // passphrase value here. So, we need a separate generator
            // function for the on-page demo.
            
            // Let's redefine a simpler generator for the page demo
            // to avoid the double-copy/double-toast.
            const pageGenerator = () => {
                const adj = randomCapitalize(getRandomItem(descriptors));
                const p1 = getRandomItem(punctuation);
                const verb = randomCapitalize(getRandomItem(verbs));
                const p2 = getRandomItem(punctuation);
                const nounWord = getRandomItem(nouns);
                let noun;
                if (adj[0] === adj[0].toLowerCase() && verb[0] === verb[0].toLowerCase()) {
                    noun = nounWord;
                } else {
                    noun = randomCapitalize(nounWord);
                }
                const num = Math.floor(Math.random() * 90) + 10;
                return adj + p1 + verb + p2 + noun + num;
            };
            
            output.value = pageGenerator();
        });

        copyBtn.addEventListener('click', () => {
            if (output.value) {
                // Use execCommand for robustness in iFrames
                try {
                    const ta = document.createElement('textarea');
                    ta.value = output.value;
                    ta.style.position = 'fixed';
                    ta.style.top = '-9999px';
                    ta.style.left = '-9999px';
                    document.body.appendChild(ta);
                    ta.focus();
                    ta.select();
                    document.execCommand('copy');
                    document.body.removeChild(ta);

                    // UPDATED: Show the on-page toast with the passphrase
                    showToast(`${output.value} <br/> <span class="text-sm font-normal">copied to clipboard!</span>`);

                } catch (err) {
                    showToast('Copy failed.');
                }
            }
        });
    }
    
    // Populate the data lists on the page
    function populateLists() {
        const descList = document.getElementById('descriptors-list');
        const verbList = document.getElementById('verbs-list');
        const nounList = document.getElementById('nouns-list');
        const puncList = document.getElementById('punctuation-list');
        
        if (descList) descList.textContent = descriptors.join(', ');
        if (verbList) verbList.textContent = verbs.join(', ');
        if (nounList) nounList.textContent = nouns.join(', ');
        if (puncList) puncList.textContent = punctuation.join(' ');
    }
    
    document.addEventListener('DOMContentLoaded', populateLists);

    // ThisIIFE for the page script is separate from the bookmarklet's IIFE.
    // The <pre><code> block now shows the bookmarklet's source.
    // The bookmarklet href has the minified version of that source.
    // This script block handles the page's UI *only*.
    // I had to separate the page's generate logic from the bookmarklet's
    // generate-and-copy logic to prevent a double-toast.

})();</code></pre>
                </div>
            </section>
        </main>
    </div>

    <!-- NEW: Toast Notification Element -->
    <!-- UPDATED: Changed bottom-5 to top-5 and translate-y-5 to -translate-y-12 -->
    <div id="copy-toast" class="fixed top-5 left-1/2 -translate-x-1/2 bg-green-500 text-white py-3 px-6 rounded-lg font-semibold shadow-lg opacity-0 invisible transform -translate-y-12 transition-all duration-300 ease-in-out z-50 text-center">
        Copied to clipboard!
    </div>

    <script>
        // This script block contains the logic for the interactive demo.
        (function() {
            // --- Data Lists (Copied from the bookmarklet) ---
            const descriptors = [
                'Alert', 'Always', 'Badly', 'Brave', 'Bright', 'Brightly', 'Calm', 'Calmly', 'Clear', 'Clearly',
                'Close', 'Closely', 'Cold', 'Common', 'Cool', 'Daily', 'Deeply', 'Direct', 'Early', 'Easily',
                'Empty', 'Even', 'Evenly', 'Exact', 'Exactly', 'Extra', 'Fair', 'Fairly', 'Final', 'Finally',
                'Fine', 'Finely', 'First', 'Fit', 'Fixed', 'Freely', 'Fresh', 'Freshly', 'Full', 'Fully',
                'Gently', 'Glad', 'Gladly', 'Gold', 'Golden', 'Grand', 'Great', 'Greatly', 'Green', 'Happy',
                'Happily', 'Heavy', 'Highly', 'Honestly', 'Hourly', 'Human', 'Ideal', 'Inner', 'Joint', 'Keen',
                'Kind', 'Kindly', 'Large', 'Largely', 'Last', 'Late', 'Lately', 'Legal', 'Level', 'Light',
                'Lightly', 'Local', 'Loud', 'Loudly', 'Low', 'Lower', 'Lucky', 'Magic', 'Main', 'Mainly',
                'Major', 'Merely', 'Monthly', 'Moral', 'Motor', 'Neat', 'Neatly', 'Nearly', 'Newer', 'Newly',
                'Next', 'Noble', 'Normal', 'Official', 'Often', 'Only', 'Open', 'Openly', 'Other', 'Outer',
                'Past', 'Personal', 'Plain', 'Plainly', 'Prime', 'Proud', 'Proudly', 'Public', 'Quick', 'Quickly',
                'Quiet', 'Quietly', 'Radio', 'Rapid', 'Rarely', 'Real', 'Really', 'Rich', 'Right', 'Rising',
                'Roman', 'Royal', 'Rural', 'Sadly', 'Safe', 'Safely', 'Same', 'Sharp', 'Shiny', 'Short',
                'Simple', 'Simply', 'Single', 'Slow', 'Slowly', 'Small', 'Smart', 'Smooth', 'Soft', 'Solid',
                'Special', 'Square', 'Still', 'Stone', 'Strong', 'Sure', 'Sweet', 'Tall', 'Tidy', 'Total',
                'True', 'Upper'
            ];
            const verbs = [
                'Acted', 'Acting', 'Added', 'Adding', 'Answered', 'Answering', 'Applied', 'Arrived', 'Arriving', 'Asked', 
                'Asking', 'Avoided', 'Avoiding', 'Become', 'Becoming', 'Begun', 'Beginning', 'Believed', 'Believing', 'Bought', 
                'Brought', 'Buying', 'Building', 'Built', 'Called', 'Calling', 'Cared', 'Caring', 'Catching', 'Caught', 
                'Changed', 'Changing', 'Checked', 'Checking', 'Choosing', 'Chosen', 'Cleaned', 'Cleaning', 'Cleared', 'Clearing', 
                'Climbed', 'Climbing', 'Closed', 'Closing', 'Counted', 'Counting', 'Covered', 'Covering', 'Crossed', 'Crossing', 
                'Danced', 'Dancing', 'Dated', 'Dating', 'Dealing', 'Dealt', 'Decided', 'Deciding', 'Drawn', 'Dreamed', 
                'Dreaming', 'Driven', 'Driving', 'Ended', 'Ending', 'Entered', 'Entering', 'Faced', 'Facing', 'Fallen', 
                'Falling', 'Filled', 'Filling', 'Finding', 'Found', 'Flown', 'Flying', 'Followed', 'Following', 'Gained', 
                'Gaining', 'Given', 'Giving', 'Going', 'Gone', 'Grown', 'Growing', 'Guided', 'Guiding', 'Handled', 
                'Handling', 'Heard', 'Hearing', 'Held', 'Helping', 'Hidden', 'Hiding', 'Holding', 'Hoped', 'Hoping', 
                'Imagined', 'Imaging', 'Invited', 'Inviting', 'Joked', 'Joined', 'Joining', 'Judged', 'Judging', 'Jumped', 
                'Jumping', 'Kept', 'Keeping', 'Knowing', 'Known', 'Laughed', 'Laughing', 'Learned', 'Learning', 'Leaving', 
                'Left', 'Lifted', 'Lifting', 'Lived', 'Living', 'Looked', 'Looking', 'Losing', 'Lost', 'Made', 
                'Making', 'Marked', 'Marking', 'Matched', 'Matching', 'Meeting', 'Met', 'Moved', 'Moving', 'Opened', 
                'Opening', 'Ordered', 'Ordering', 'Paid', 'Painted', 'Painting', 'Parked', 'Parking', 'Paying', 'Picked', 
                'Picking', 'Planned', 'Planning', 'Played', 'Playing', 'Pressed', 'Pressing', 'Pulled', 'Pulling', 'Pushed', 
                'Pushing', 'Raised', 'Raising', 'Reached', 'Reaching', 'Read', 'Reading', 'Run', 'Running', 'Seen', 
                'Seeing', 'Set', 'Setting', 'Started', 'Starting', 'Taken', 'Taking', 'Talked', 'Talking'
            ];
            const nouns = [
                'Area', 'Art', 'Back', 'Bank', 'Bed', 'Bill', 'Book', 'Business', 'Car', 'Case', 
                'Cash', 'Cat', 'Centre', 'Change', 'City', 'Class', 'Club', 'Cost', 'Day', 'Door', 
                'End', 'Fact', 'Family', 'Farm', 'Father', 'Field', 'File', 'Film', 'Food', 'Foot', 
                'Force', 'Form', 'Fund', 'Game', 'Hand', 'Health', 'Heart', 'Home', 'Hour', 'House', 
                'Idea', 'Issue', 'Job', 'Judge', 'Kind', 'King', 'Lake', 'Land', 'Law', 'Level', 
                'Life', 'Light', 'Line', 'Link', 'List', 'Mail', 'Map', 'Mark', 'Market', 'Matter', 
                'Media', 'Mind', 'Minute', 'Model', 'Money', 'Month', 'Morning', 'Mother', 'Music', 'Name', 
                'Need', 'Network', 'News', 'Night', 'Note', 'Number', 'Office', 'Order', 'Owner', 'Page', 
                'Paint', 'Paper', 'Parent', 'Park', 'Part', 'Past', 'Path', 'Peace', 'People', 'Person', 
                'Phone', 'Photo', 'Place', 'Plan', 'Plane', 'Plant', 'Play', 'Point', 'Post', 'Price'
            ];
            const punctuation = ['!', '#', '$', '%', '&', '*', '+', '-', '.'];

            // --- Helper Functions ---
            function getRandomItem(arr) {
                return arr[Math.floor(Math.random() * arr.length)];
            }

            /**
             * Randomly lowercases the first letter of a word.
             * (Assumes source words are already capitalised)
             * @param {string} word The word to process.
             * @returns {string} The word with its first letter randomly cased.
             */
            function randomCapitalize(word) {
                // 50% chance of being lowercase
                if (Math.random() > 0.5) {
                    return word.charAt(0).toLowerCase() + word.slice(1);
                }
                return word; // Keep original (uppercase)
            }

            // --- Core Logic (for page UI only) ---
            function generatePassphraseForPage() {
                const adj = randomCapitalize(getRandomItem(descriptors));
                const p1 = getRandomItem(punctuation);
                const verb = randomCapitalize(getRandomItem(verbs));
                const p2 = getRandomItem(punctuation);
                
                const nounWord = getRandomItem(nouns);
                let noun;

                // Check if the first two words were BOTH lowercased
                if (adj[0] === adj[0].toLowerCase() && verb[0] === verb[0].toLowerCase()) {
                    noun = nounWord; // Force capitalise
                } else {
                    noun = randomCapitalize(nounWord); // Randomise
                }
                
                const num = Math.floor(Math.random() * 90) + 10; // 10-99
                return adj + p1 + verb + p2 + noun + num;
            }

            // --- DOM Interaction ---
            const btn = document.getElementById('generate-btn');
            const output = document.getElementById('passphrase-output');
            const copyBtn = document.getElementById('copy-btn');
            const toast = document.getElementById('copy-toast');
            let toastTimeout; // To manage the toast's fade-out

            /**
             * Shows the on-page toast notification.
             * @param {string} message The message to display (can be HTML).
             */
            function showToast(message) {
                if (!toast) return;

                if (toastTimeout) {
                    clearTimeout(toastTimeout);
                }

                // UPDATED: Use innerHTML to render the message
                toast.innerHTML = message;
                
                // Apply "show" classes
                toast.classList.remove('opacity-0', 'invisible', '-translate-y-12');
                toast.classList.add('opacity-100', 'visible', 'translate-y-0');

                // Set a timeout to hide the toast
                toastTimeout = setTimeout(() => {
                    toast.classList.remove('opacity-100', 'visible', 'translate-y-0');
                    toast.classList.add('opacity-0', 'invisible', '-translate-y-12');
                }, 5000); // Hide after 5 seconds
            }

            if (btn && output && copyBtn && toast) {
                btn.addEventListener('click', () => {
                    output.value = generatePassphraseForPage();
                });

                copyBtn.addEventListener('click', () => {
                    if (output.value) {
                        try {
                            const ta = document.createElement('textarea');
                            ta.value = output.value;
                            ta.style.position = 'fixed';
                            ta.style.top = '-9999px';
                            ta.style.left = '-9999px';
                            document.body.appendChild(ta);
                            ta.focus();
                            ta.select();
                            document.execCommand('copy');
                            document.body.removeChild(ta);

                            // UPDATED: Show the on-page toast with the passphrase
                            showToast(`${output.value} <br/> <span class="text-sm font-normal">copied to clipboard!</span>`);

                        } catch (err) {
                            showToast('Copy failed.');
                        }
                    }
                });
            }
            
            // Populate the data lists on the page
            function populateLists() {
                const descList = document.getElementById('descriptors-list');
                const verbList = document.getElementById('verbs-list');
                const nounList = document.getElementById('nouns-list');
                const puncList = document.getElementById('punctuation-list');
                
                if (descList) descList.textContent = descriptors.join(', ');
                if (verbList) verbList.textContent = verbs.join(', ');
                if (nounList) nounList.textContent = nouns.join(', ');
                if (puncList) puncList.textContent = punctuation.join(' ');
            }
            
            // Run population logic when the document is ready
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', populateLists);
            } else {
                populateLists(); // Already loaded
            }
        })();
    </script>
</body>
</html>



